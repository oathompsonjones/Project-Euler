<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <title>Project Euler</title>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script>
        (async () => {
            const MAX_PAGES = 5;

            let page = parseInt(document.URL.split("?page=")[ 1 ]);
            if (isNaN(page) || page < 1) window.location.replace(`${document.URL.split("?page=")[ 0 ]}?page=1`);
            if (page > MAX_PAGES) window.location.replace(`${document.URL.split("?page=")[ 0 ]}?page=${MAX_PAGES}`);

            const writeNav = () => {
                document.write(`<nav aria-label="Pages"><ul class="pagination"><li class="page-item"><a class="page-link" href="/Project-Euler/?page=${Math.max(page - 1, 1)}">Previous</a></li>`);
                for (let i = 0; i < MAX_PAGES; i++)
                    document.write(`<li class="page-item"><a class="page-link" href="/Project-Euler/?page=${i + 1}">${i + 1}</a></li>`);
                document.write(`<li class="page-item"><a class="page-link" href="/Project-Euler/?page=${Math.min(page + 1, MAX_PAGES)}">Next</a></li></ul></nav>`);
            };

            writeNav();

            const start = Math.floor(page - 1) * 10;
            const end = start + 9;

            console.log({ start, end });

            for (let i = start; i < end; i++) {
                const outerFolderMin = Math.floor(i / 50) * 50 + 1;
                const outerFolderMax = outerFolderMin + 49;
                const outerFolder = `${outerFolderMin}-${outerFolderMax}`;
                const innerFolderMin = Math.floor(i / 10) * 10 + 1;
                const innerFolderMax = innerFolderMin + 9;
                const innerFolder = `${innerFolderMin}-${innerFolderMax}`;
                const path = `https://raw.githubusercontent.com/oathompsonjones/Project-Euler/master/src/${outerFolder}/${innerFolder}/${i + 1}.js`;

                const file = await fetch(path);
                const text = await file.text();

                document.write(`<h3>Problem ${i + 1}</h3>`);
                document.write(`<pre><code>${text}</code></pre>`);
            }

            writeNav();
        })();
    </script>
</body>

</html>